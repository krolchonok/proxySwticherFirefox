<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <title>Настройки прокси</title>
    <link rel="stylesheet" href="settings.css" />
  </head>

  <body>
    <h1>Настройки прокси</h1>

    <div id="settingsContainer">
      <div class="section">
        <h2>Профили прокси-серверов</h2>
        <p>
          Управление профилями прокси-серверов. Создайте профили для разных
          сценариев использования.
        </p>

        <div id="proxyProfilesList">
          <div class="no-profiles">Нет сохраненных профилей</div>
        </div>

        <div class="profile-form">
          <h3 id="profileFormTitle">Добавить новый профиль</h3>
          <input type="hidden" id="profileId" value="" />

          <label for="profileName">Название профиля:</label>
          <input
            type="text"
            id="profileName"
            placeholder="Введите название профиля (например, Работа)"
            required
          />

          <label for="profileType">Тип прокси:</label>
          <select id="profileType" required>
            <option value="http">HTTP</option>
            <option value="https">HTTPS</option>
            <option value="socks">SOCKS5</option>
            <option value="socks4">SOCKS4</option>
          </select>

          <label for="profileHost">IP-адрес или домен:</label>
          <input
            type="text"
            id="profileHost"
            placeholder="Введите IP-адрес или домен"
            required
          />

          <label for="profilePort">Порт:</label>
          <input
            type="number"
            id="profilePort"
            placeholder="Введите порт"
            min="1"
            max="65535"
            required
          />

        <div class="action-row">
          <button id="saveProxyProfile" class="btn">Сохранить профиль</button>
          <button
            id="cancelEditProfile"
            class="btn btn-secondary"
            style="display: none"
          >
            Отменить
          </button>
        </div>
        </div>
      </div>

      <div class="section">
        <h2>Настройки прокси по умолчанию</h2>
        <p>
          Выберите профиль по умолчанию для хостов без специфичных настроек и
          для глобального проксирования.
        </p>

        <label for="defaultProxyProfileSelect">Профиль по умолчанию:</label>
        <select id="defaultProxyProfileSelect">
          <option value="">Выберите профиль (Не выбрано)</option>
        </select>

        <button id="saveDefaultProfile" class="btn full-width">
          Сохранить профиль по умолчанию
        </button>
      </div>

      <div class="section">
        <h2>Белый список (не проксировать)</h2>
        <p>
          Укажите хосты или IP-адреса (по одному на строке), которые НИКОГДА не
          будут проксироваться, даже если включено "Проксировать весь трафик"
          или им задан специфичный профиль.
        </p>
        <p class="note">
          Поддерживаются полные хосты (<code>example.com</code>), полные
          IP-адреса (<code>192.168.1.10</code>) и IP-подсети IPv4 в формате CIDR
          /24 (<code>192.168.1.0/24</code>).
        </p>
        <textarea
          id="whitelistInput"
          rows="5"
          placeholder="Введите хосты или IP-адреса для белого списка, по одному на строке"
        ></textarea>
        <button id="saveWhitelist" class="btn full-width">
          Сохранить белый список
        </button>
      </div>

      <div class="section">
        <h2>Импорт/Экспорт настроек</h2>
        <p>
          Экспорт/импорт всех настроек (профили, хосты с привязками, белый
          список, состояние переключателей).
        </p>
        <div class="action-row">
          <button id="exportAllSettings" class="btn btn-success">
            Экспортировать в файл
          </button>
          <button id="importAllSettings" class="btn btn-warning">
            Импортировать из файла
          </button>
          <input
            type="file"
            id="importFile"
            accept=".json"
            style="display: none"
          />
        </div>
      </div>

      <div class="section">
        <h2>Синхронизация с облаком</h2>
        <p>
          Сохраните или загрузите настройки через учетную запись браузера.
        </p>
        <div class="action-row">
          <button id="saveToCloud" class="btn btn-info">
            Сохранение в облако
          </button>
          <button id="loadFromCloud" class="btn btn-info">
            Загрузка из облака
          </button>
        </div>
      </div>
    </div>

    <script src="settings.js"></script>
  </body>
</html>
